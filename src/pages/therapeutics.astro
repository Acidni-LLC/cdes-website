---
import Layout from '../layouts/Layout.astro';
import terpeneTherapeutics from '../data/terpene-therapeutics.json';
import cannabinoidTherapeutics from '../data/cannabinoid-therapeutics.json';

const terpenes = terpeneTherapeutics.terpenes;
const cannabinoids = cannabinoidTherapeutics.cannabinoids;
---

<Layout title="Therapeutic Data | CDES" description="Evidence-based therapeutic data for terpenes and cannabinoids with ICD-10 codes and PubMed citations">
  <!-- Hero -->
  <div class="bg-gradient-to-br from-blue-700 to-blue-900 text-white">
    <div class="max-w-7xl mx-auto px-4 py-16 sm:py-20 sm:px-6 lg:px-8">
      <div class="text-center">
        <div class="inline-flex items-center px-4 py-2 bg-blue-600 rounded-full text-sm font-medium mb-6">
          <span class="animate-pulse mr-2"></span> Evidence-Based Research
        </div>
        <h1 class="text-3xl sm:text-4xl md:text-5xl font-bold mb-6">CDES Therapeutic Data</h1>
        <p class="text-xl text-blue-100 max-w-3xl mx-auto mb-8">
          Comprehensive therapeutic information for terpenes and cannabinoids with 
          ICD-10 codes, mechanisms of action, and PubMed citations.
        </p>
        <div class="flex flex-wrap gap-3 justify-center text-sm">
          <span class="px-3 py-1 bg-blue-600 rounded">ICD-10-CM Codes</span>
          <span class="px-3 py-1 bg-blue-600 rounded">PubMed Citations</span>
          <span class="px-3 py-1 bg-blue-600 rounded">Evidence Levels</span>
          <span class="px-3 py-1 bg-blue-600 rounded">Mechanism of Action</span>
        </div>
      </div>
    </div>
  </div>

  <!-- Terpene Therapeutics -->
  <div class="max-w-7xl mx-auto px-4 py-16 sm:px-6 lg:px-8">
    <h2 class="text-3xl font-bold text-gray-900 mb-4">Terpene Therapeutics</h2>
    <p class="text-lg text-gray-600 mb-8">
      Research-backed therapeutic applications for cannabis terpenes. Evidence levels: 
      <span class="text-green-600 font-medium">High</span> (clinical trials), 
      <span class="text-blue-600 font-medium">Moderate</span> (animal studies), 
      <span class="text-yellow-600 font-medium">Emerging</span> (preclinical/in vitro).
    </p>

    <div class="space-y-8">
      {terpenes.slice(0, 5).map((terpene: any) => (
        <div class="bg-white border rounded-lg overflow-hidden">
          <div class="bg-cdes-green-600 text-white px-6 py-4">
            <h3 class="text-xl font-semibold">{terpene.name}</h3>
            <code class="text-cdes-green-200 text-sm">{terpene.id}</code>
          </div>
          <div class="p-6">
            <h4 class="font-semibold text-gray-900 mb-3">Medical Conditions</h4>
            <div class="grid md:grid-cols-2 gap-4 mb-6">
              {terpene.conditions?.slice(0, 4).map((condition: any) => (
                <div class="border rounded-lg p-4">
                  <div class="flex justify-between items-start mb-2">
                    <span class="font-medium text-gray-900">{condition.name}</span>
                    <span class={`text-xs px-2 py-1 rounded ${
                      condition.evidenceLevel === 'high' ? 'bg-green-100 text-green-800' :
                      condition.evidenceLevel === 'moderate' ? 'bg-blue-100 text-blue-800' :
                      'bg-yellow-100 text-yellow-800'
                    }`}>
                      {condition.evidenceLevel}
                    </span>
                  </div>
                  <div class="text-sm text-gray-500 mb-2">
                    <span class="font-mono">{condition.icd10}</span>  {condition.mechanism}
                  </div>
                  {condition.pubmedIds?.length > 0 && (
                    <div class="text-xs text-gray-400">
                      PubMed: {condition.pubmedIds.slice(0, 2).map((id: string) => (
                        <a href={`https://pubmed.ncbi.nlm.nih.gov/${id}/`} target="_blank" class="text-blue-500 hover:underline mr-2">{id}</a>
                      ))}
                    </div>
                  )}
                </div>
              ))}
            </div>

            <h4 class="font-semibold text-gray-900 mb-3">Symptoms</h4>
            <div class="flex flex-wrap gap-2 mb-4">
              {terpene.symptoms?.slice(0, 6).map((symptom: any) => (
                <span class={`text-sm px-3 py-1 rounded ${
                  symptom.relevance === 'high' ? 'bg-green-100 text-green-800' :
                  symptom.relevance === 'moderate' ? 'bg-blue-100 text-blue-800' :
                  'bg-gray-100 text-gray-700'
                }`}>
                  {symptom.name}
                </span>
              ))}
            </div>

            {terpene.contraindications?.length > 0 && (
              <div class="bg-red-50 border border-red-200 rounded p-3 text-sm">
                <span class="font-medium text-red-800">Contraindications:</span>
                <span class="text-red-700 ml-2">{terpene.contraindications.join(', ')}</span>
              </div>
            )}
          </div>
        </div>
      ))}
    </div>

    <div class="text-center mt-8">
      <a href="https://github.com/Acidni-LLC/cdes-reference-data/blob/main/terpenes/terpene-therapeutics.json" 
         class="text-cdes-green-600 hover:underline font-medium">
        View all {terpenes.length} terpenes with therapeutic data 
      </a>
    </div>
  </div>

  <!-- Cannabinoid Therapeutics -->
  <div class="bg-gray-50 py-16">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <h2 class="text-3xl font-bold text-gray-900 mb-4">Cannabinoid Therapeutics</h2>
      <p class="text-lg text-gray-600 mb-8">
        Research-backed therapeutic applications for cannabinoids including FDA approval status and scheduling information.
      </p>

      <div class="space-y-8">
        {cannabinoids.slice(0, 4).map((cannabinoid: any) => (
          <div class="bg-white border rounded-lg overflow-hidden">
            <div class="bg-blue-600 text-white px-6 py-4 flex justify-between items-center">
              <div>
                <h3 class="text-xl font-semibold">{cannabinoid.name}</h3>
                <span class="text-blue-200 text-sm">{cannabinoid.fullName}</span>
              </div>
              <div class="text-right">
                {cannabinoid.fdaApprovedProducts?.length > 0 && (
                  <span class="bg-green-500 text-white text-xs px-2 py-1 rounded">FDA Approved</span>
                )}
                <div class="text-xs text-blue-200 mt-1">{cannabinoid.schedule}</div>
              </div>
            </div>
            <div class="p-6">
              {cannabinoid.fdaApprovedProducts?.length > 0 && (
                <div class="bg-green-50 border border-green-200 rounded p-4 mb-6">
                  <h4 class="font-semibold text-green-800 mb-2">FDA Approved Products</h4>
                  <div class="grid md:grid-cols-2 gap-4">
                    {cannabinoid.fdaApprovedProducts.map((product: any) => (
                      <div class="text-sm">
                        <span class="font-medium text-green-900">{product.name}</span>
                        <span class="text-green-700 ml-2">({product.approvalYear})</span>
                        <div class="text-green-600">{product.indication}</div>
                      </div>
                    ))}
                  </div>
                </div>
              )}

              <h4 class="font-semibold text-gray-900 mb-3">Research-Supported Conditions</h4>
              <div class="grid md:grid-cols-2 gap-4 mb-6">
                {cannabinoid.conditions?.slice(0, 4).map((condition: any) => (
                  <div class="border rounded-lg p-4">
                    <div class="flex justify-between items-start mb-2">
                      <span class="font-medium text-gray-900">{condition.name}</span>
                      <span class={`text-xs px-2 py-1 rounded ${
                        condition.evidenceLevel === 'high' ? 'bg-green-100 text-green-800' :
                        condition.evidenceLevel === 'moderate' ? 'bg-blue-100 text-blue-800' :
                        'bg-yellow-100 text-yellow-800'
                      }`}>
                        {condition.evidenceLevel}
                      </span>
                    </div>
                    <div class="text-sm text-gray-500 mb-2">
                      <span class="font-mono">{condition.icd10}</span>
                    </div>
                    <div class="text-sm text-gray-600">{condition.mechanism}</div>
                  </div>
                ))}
              </div>

              {cannabinoid.sideEffects?.length > 0 && (
                <div class="bg-yellow-50 border border-yellow-200 rounded p-3 text-sm">
                  <span class="font-medium text-yellow-800">Common Side Effects:</span>
                  <span class="text-yellow-700 ml-2">{cannabinoid.sideEffects.slice(0, 5).join(', ')}</span>
                </div>
              )}
            </div>
          </div>
        ))}
      </div>

      <div class="text-center mt-8">
        <a href="https://github.com/Acidni-LLC/cdes-reference-data/blob/main/cannabinoids/cannabinoid-therapeutics.json" 
           class="text-blue-600 hover:underline font-medium">
          View all {cannabinoids.length} cannabinoids with therapeutic data 
        </a>
      </div>
    </div>
  </div>

  <!-- Disclaimer -->
  <div class="max-w-4xl mx-auto px-4 py-12 sm:px-6 lg:px-8">
    <div class="bg-gray-100 border border-gray-300 rounded-lg p-6">
      <h3 class="font-semibold text-gray-900 mb-2"> Medical Disclaimer</h3>
      <p class="text-sm text-gray-600">
        This therapeutic data is provided for informational and research purposes only. It does not constitute 
        medical advice. Cannabis products are not FDA-approved for the treatment of most conditions listed here. 
        Always consult with a qualified healthcare provider before using cannabis for medical purposes. 
        Evidence levels reflect the current state of research and may change as new studies are published.
      </p>
    </div>
  </div>

  <!-- Download -->
  <div class="bg-blue-50 py-12">
    <div class="max-w-4xl mx-auto px-4 text-center">
      <h2 class="text-2xl font-bold text-gray-900 mb-4">Access the Full Dataset</h2>
      <p class="text-gray-600 mb-6">
        Download the complete therapeutic data with all conditions, symptoms, and citations.
      </p>
      <div class="flex flex-wrap gap-4 justify-center">
        <a href="https://raw.githubusercontent.com/Acidni-LLC/cdes-reference-data/main/terpenes/terpene-therapeutics.json"
           class="px-6 py-3 bg-cdes-green-600 text-white rounded-lg hover:bg-cdes-green-700 transition">
          Terpene Data (JSON)
        </a>
        <a href="https://raw.githubusercontent.com/Acidni-LLC/cdes-reference-data/main/cannabinoids/cannabinoid-therapeutics.json"
           class="px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition">
          Cannabinoid Data (JSON)
        </a>
        <a href="https://github.com/Acidni-LLC/cdes-reference-data"
           class="px-6 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-white transition">
          View on GitHub
        </a>
      </div>
    </div>
  </div>
</Layout>
